<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerenciar Logotipos - Logo Gallery Admin</title>

    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/manage-logos.css" />
    <script type="module" src="../components/user-menu.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link rel="stylesheet" href="./components/alert.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <nav>
          <div class="logo">
            <img
              src="../images/brandConnect/logo_brandConnect.png"
              alt="BrandConnect"
            />
          </div>
          <div class="user-info">
            <user-menu></user-menu>
          </div>
        </nav>
      </header>

      <main class="content">
        <div class="logo-management">
          <div class="logo-form-container">
            <h2>Adicionar Novo Logotipo</h2>
            <form id="logo-form">
              <div class="form-group">
                <label for="client-name">Razão Social:</label>
                <input
                  type="text"
                  id="client-name"
                  name="client-name"
                  required
                />
              </div>
              <div class="form-group">
                <label for="client-fantasy-name">Nome Fantasia:</label>
                <input
                  type="text"
                  id="client-fantasy-name"
                  name="client-fantasy-name"
                />
              </div>
              <div class="form-group">
                <label for="client-CNPJ">CNPJ:</label>
                <input
                  type="text"
                  id="client-CNPJ"
                  name="client-CNPJ"
                  placeholder="00.000.000/0000-00"
                  required
                />
                <span
                  id="cnpj-feedback"
                  style="color: red; font-size: 0.9em"
                ></span>
              </div>

              <div
                class="form-group"
                style="display: flex; flex-direction: column"
              >
                <label>Permitir mostrar endereço:</label>
                <div style="display: flex; gap: 20px; margin-top: 5px">
                  <label style="display: flex; align-items: center; gap: 5px">
                    <input
                      type="radio"
                      id="show-address-true"
                      name="show-address-active"
                      value="true"
                      required
                    />
                    Sim
                  </label>

                  <label style="display: flex; align-items: center; gap: 5px">
                    <input
                      type="radio"
                      id="show-address-false"
                      name="show-address-active"
                      value="false"
                      required
                    />
                    Não
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label for="client-cep">CEP:</label>
                <input
                  type="text"
                  id="client-cep"
                  name="client_cep"
                  maxlength="9"
                  required
                />
              </div>

              <div class="form-group">
                <label for="client-address">Endereço:</label>
                <input
                  type="text"
                  id="client-address"
                  name="client_address"
                  required
                />
              </div>

              <div class="form-group">
                <label for="client-number">Nº:</label>
                <input
                  type="text"
                  id="client-number"
                  name="client_number"
                  required
                />
              </div>

              <div class="form-group">
                <label for="client-neighborhood">Bairro:</label>
                <input
                  type="text"
                  id="client-neighborhood"
                  name="client_neighborhood"
                  required
                />
              </div>

              <div class="form-group">
                <label for="client-city">Cidade:</label>
                <input
                  type="text"
                  id="client-city"
                  name="client_city"
                  required
                />
              </div>

              <div class="form-group">
                <label for="client-uf">UF:</label>
                <select id="client-uf" name="client_uf" required>
                  <option value="">Selecione</option>
                </select>
              </div>

              <div class="form-group">
                <label for="client-lat">Latitude:</label>
                <input type="text" id="client-lat" name="client_lat" readonly />
              </div>

              <div class="form-group">
                <label for="client-lng">Longitude:</label>
                <input type="text" id="client-lng" name="client_lng" readonly />
              </div>

              <div class="form-group">
                <label for="telephone">Telefone:</label>
                <input
                  type="text"
                  id="telephone"
                  name="telephone"
                  placeholder="(XX) XXXX-XXXX"
                />
              </div>

              <div class="form-group">
                <label for="cellphone">Celular:</label>
                <input
                  type="text"
                  id="cellphone"
                  name="cellphone"
                  placeholder="(XX) XXXXX-XXXX"
                />
              </div>

              <div class="form-group">
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required />
                <small id="email-error" style="color: red; display: none"
                  >E-mail inválido</small
                >
              </div>

              <div class="form-group">
                <label for="client-website">Website:</label>
                <input
                  type="url"
                  placeholder="ex: https://exemplo.com"
                  id="client-website"
                  name="client_website"
                />
              </div>

              <div class="form-group">
                <label for="client-videoUrl">Url vídeo:</label>
                <input
                  type="url"
                  placeholder="ex: https://www.youtube.com/seucanal"
                  id="client-videoUrl"
                  name="client_video_url"
                />
              </div>

              <div class="form-group">
                <label for="client-instagramUrl">Instagram:</label>
                <input
                  type="url"
                  placeholder="ex: https://www.instagram.com/usuario"
                  id="client-instagramUrl"
                  name="client_instagram_url"
                />
              </div>

              <div class="form-group">
                <label for="client-facebookUrl">Facebook:</label>
                <input
                  type="url"
                  placeholder="ex: https://www.facebook.com/usuario"
                  id="client-facebookUrl"
                  name="client-facebookUrl"
                />
              </div>

              <div class="form-group">
                <label for="client-whatsapp">WhatsApp:</label>
                <input
                  type="text"
                  id="client-whatsapp"
                  name="client_whatsapp"
                  placeholder="(XX) XXXXX-XXXX"
                />
              </div>

              <div class="form-group">
                <label for="logo-category">Categoria:</label>
                <select id="logo-category" name="logo_category" required>
                  <option value="">Selecione uma categoria</option>
                </select>
              </div>

              <div class="form-group">
                <label for="logo-description">Descrição:</label>
                <textarea
                  id="logo-description"
                  name="logo_description"
                ></textarea>
              </div>

              <!-- Data Inicial -->
              <div class="form-group">
                <label for="start-date">Contrato - Data Inicial::</label>
                <input type="date" id="start-date" name="start_date" required />
              </div>

              <!-- Seletor de Meses -->
              <div class="form-group">
                <label for="contract-months">Tempo de Contrato:</label>
                <select id="contract-months" name="contract_months" required>
                  <option value="">Selecione</option>
                  <option value="6">6 meses</option>
                  <option value="12">12 meses</option>
                  <option value="24">24 meses</option>
                  <option value="36">36 meses</option>
                </select>
              </div>

              <!-- Data Final -->
              <div class="form-group">
                <label for="end-date">Contrato - Data Final:</label>
                <input type="date" id="end-date" name="end_date" readonly />
              </div>

              <div class="form-group">
                <label for="plan_type">Tipo de plano:</label>
                <select id="plan_type" name="plan_type" required>
                  <option value="">Selecione</option>
                  <option value="basico">Basico</option>
                  <option value="premium">Premium</option>
                  <option value="premium-plus">Premium Plus</option>
                </select>
              </div>

              <div class="form-group">
                <label for="client_level">Nível do cliente (0 a 10):</label>
                <select id="client_level" name="client_level" required>
                  <option value="">Selecione</option>
                  <!-- Gerando opções de 0 a 10 -->
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </div>

              <div class="form-group">
                <label for="contract_value">Valor do Contrato:</label>
                <input
                  type="text"
                  id="contract_value"
                  name="contract_value"
                  required
                  value="0,00"
                />
              </div>

              <div
                class="form-group"
                style="display: flex; flex-direction: column"
              >
                <label>Ativo:</label>
                <div style="display: flex; gap: 20px; margin-top: 5px">
                  <label style="display: flex; align-items: center; gap: 5px">
                    <input
                      type="radio"
                      id="ativo-true"
                      name="contract-active"
                      value="true"
                      required
                    />
                    Sim
                  </label>

                  <label style="display: flex; align-items: center; gap: 5px">
                    <input
                      type="radio"
                      id="ativo-false"
                      name="contract-active"
                      value="false"
                      required
                    />
                    Não
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label for="logo-image">Imagem do Logotipo:</label>
                <button type="button" id="btn-upload-image">
                  Selecionar Imagem
                </button>
                <input
                  type="text"
                  id="logo-image-url"
                  name="logo_image_url"
                  readonly
                  placeholder="URL da imagem será exibida aqui"
                />
                <small
                  >Formatos aceitos: JPG, PNG, SVG. Tamanho máximo: 2MB.</small
                >
                <!-- 🔽 Pré-visualização da imagem -->
                <img
                  id="logo-preview_img"
                  src="placeholder.png"
                  alt="Pré-visualização do logotipo"
                  style="
                    display: none;
                    max-width: 100px;
                    margin-top: 10px;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                  "
                />
              </div>
              <input
                type="file"
                id="logo-image"
                name="logo-image"
                accept="image/*"
                style="display: none"
              />

              <div>
                <h3>Horário de Funcionamento:</h3>
                <div
                  id="opening-hours-container"
                  style="display: flex; flex-direction: column; gap: 10px"
                >
                  <div class="opening-day" data-day="monday">
                    <label for="monday-start">Segunda-feira:</label>
                    <input type="time" id="monday-start" name="monday_start" />
                    <span>às</span>
                    <input type="time" id="monday-end" name="monday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="monday-closed"
                        name="monday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="tuesday">
                    <label for="tuesday-start">Terça-feira:</label>
                    <input
                      type="time"
                      id="tuesday-start"
                      name="tuesday_start"
                    />
                    <span>às</span>
                    <input type="time" id="tuesday-end" name="tuesday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="tuesday-closed"
                        name="tuesday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="wednesday">
                    <label for="wednesday-start">Quarta-feira:</label>
                    <input
                      type="time"
                      id="wednesday-start"
                      name="wednesday_start"
                    />
                    <span>às</span>
                    <input
                      type="time"
                      id="wednesday-end"
                      name="wednesday_end"
                    />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="wednesday-closed"
                        name="wednesday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="thursday">
                    <label for="thursday-start">Quinta-feira:</label>
                    <input
                      type="time"
                      id="thursday-start"
                      name="thursday_start"
                    />
                    <span>às</span>
                    <input type="time" id="thursday-end" name="thursday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="thursday-closed"
                        name="thursday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="friday">
                    <label for="friday-start">Sexta-feira:</label>
                    <input type="time" id="friday-start" name="friday_start" />
                    <span>às</span>
                    <input type="time" id="friday-end" name="friday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="friday-closed"
                        name="friday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="saturday">
                    <label for="saturday-start">Sábado:</label>
                    <input
                      type="time"
                      id="saturday-start"
                      name="saturday_start"
                    />
                    <span>às</span>
                    <input type="time" id="saturday-end" name="saturday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="saturday-closed"
                        name="saturday_closed"
                      />
                      Fechado
                    </label>
                  </div>

                  <div class="opening-day" data-day="sunday">
                    <label for="sunday-start">Domingo:</label>
                    <input type="time" id="sunday-start" name="sunday_start" />
                    <span>às</span>
                    <input type="time" id="sunday-end" name="sunday_end" />
                    <label class="closed-label">
                      <input
                        type="checkbox"
                        id="sunday-closed"
                        name="sunday_closed"
                      />
                      Fechado
                    </label>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <!-- <button type="submit" class="save-btn">Salvar</button> -->
                <button type="submit" class="save-btn">
                  <span class="btn-text">Salvar</span>
                  <span class="spinner hidden"></span>
                </button>

                <button type="reset" class="cancel-btn">Cancelar</button>
                <button type="button" id="cancel-button" style="display: none">
                  Cancelar Edição
                </button>
              </div>
            </form>
          </div>

          <div id="logos-list" class="logos-list">
            <h2>Logotipos Cadastrados</h2>
            <div class="search-filter">
              <input
                type="text"
                id="search-input"
                placeholder="Buscar por nome..."
              />
              <select id="filter-category">
                <option value="">Todas as Categorias</option>
              </select>
            </div>
            <div class="logos-grid" id="logos-grid"></div>
          </div>
        </div>

        <!-- Seção de Propagandas Premium -->
        <div class="admin-section">
          <h2><i class="fas fa-ad"></i> Cadastrar Nova Propaganda Premium</h2>
          <form id="ad-form">
            <div class="form-row">
              <div class="form-group">
                <label for="ad-title">Título da Propaganda*</label>
                <input
                  type="text"
                  id="ad-title"
                  name="title"
                  required
                  placeholder="Ex: Oferta Especial de Verão"
                />
              </div>

              <div class="form-group">
                <label for="ad-client">Cliente Premium*</label>
                <select id="ad-client" name="clientCNPJ" required>
                  <option value="">Selecione um cliente</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="ad-description">Descrição*</label>
              <textarea
                id="ad-description"
                name="description"
                required
                placeholder="Descreva a promoção ou campanha"
              ></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="ad-type">Tipo de Mídia*</label>
                <select id="ad-type" name="mediaType" required>
                  <option value="image">Imagem (Banner)</option>
                  <option value="video">Vídeo</option>
                </select>
              </div>

              <div class="form-group">
                <label for="ad-media">URL da Mídia*</label>
                <input
                  type="url"
                  id="ad-media"
                  name="mediaUrl"
                  required
                  placeholder="https://exemplo.com/banner.jpg"
                />
                <small class="hint">Para vídeos: YouTube ou link MP4</small>
              </div>
            </div>

            <div class="form-group">
              <label for="ad-link">Link de Destino*</label>
              <input
                type="url"
                id="ad-link"
                name="targetUrl"
                required
                placeholder="https://exemplo.com/promocao"
              />
              <small class="hint"
                >Página para onde o usuário será direcionado ao clicar</small
              >
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="ad-start-date">Data de Início*</label>
                <input
                  type="date"
                  id="ad-start-date"
                  name="startDate"
                  required
                />
              </div>

              <div class="form-group">
                <label for="ad-end-date">Data de Término*</label>
                <input type="date" id="ad-end-date" name="endDate" required />
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="save-btn">
                <i class="fas fa-save"></i> Salvar Propaganda
              </button>
              <button type="reset" class="cancel-btn">
                <i class="fas fa-times"></i> Limpar
              </button>
            </div>
          </form>
        </div>

        <!-- Lista de Propagandas Cadastradas -->
        <div class="admin-section">
          <h2><i class="fas fa-list"></i> Propagandas Cadastradas</h2>
          <div class="ads-controls">
            <div class="search-filter">
              <input
                type="text"
                id="ad-search-input"
                placeholder="Buscar propagandas..."
              />
              <select id="ad-filter-status">
                <option value="all">Todas</option>
                <option value="active">Ativas</option>
                <option value="inactive">Inativas</option>
                <option value="upcoming">Futuras</option>
                <option value="expired">Expiradas</option>
              </select>
            </div>
          </div>
          <div class="premium-ads-list" id="premium-ads-list">
            <!-- As propagandas serão carregadas aqui -->
          </div>
        </div>
      </main>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div id="delete-modal" class="modal hidden">
      <div class="modal-content">
        <h2>Confirmar Exclusão</h2>
        <p>Tem certeza que deseja excluir este logotipo?</p>
        <div class="modal-actions">
          <button id="confirm-delete" class="btn confirm">Excluir</button>
          <button id="cancel-delete" class="btn cancel">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- Modal Vídeo -->
    <div id="youtube-overlay" class="d-none"></div>
    <div id="youtube-modal" class="d-none">
      <div id="youtube-player"></div>
      <button
        class="close-btn"
        onclick="closeYouTubePlayer()"
        aria-label="Fechar vídeo"
      >
        X
      </button>
    </div>

    <!-- Scripts -->
    <!-- jQuery (necessário para Select2) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="../js/youtube-api.js"></script>
    <script type="module" src="../js/main.js"></script>
    <script type="module" src="../js/manage-logos.js"></script>
    <script type="module" src="../js/manage-advertising.js"></script>
  </body>
</html>
